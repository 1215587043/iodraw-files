```mermaid
# 旅游盲盒推荐系统ER图

## 1. 用户信息表 (user)
- **主键**: user_id
- **字段**:
  - username (登录账号)
  - password (登录密码)
  - location (用户位置)
  - register_time (注册时间)
  - preference_tags (偏好标签/JSON)
  - Sex/Age/Ocu/Inc/Fre/Bud/Tra/Dur/Com/Tim (Tinyint枚举)
  - question1~5_options (JSON问卷结果)
- **关系**:
  - 1 → N 产品订单表 (order.user_id)
  - 1 → N 推荐记录表 (recommendation.user_id)
  - 1 → N 消息记录表 (message.user_id)

## 2. 旅游产品表 (product)
- **主键**: product_id
- **字段**:
  - product_name (产品名称)
  - price_range (价格范围)
  - destination_type (产品分类/索引)
  - activity_tags (活动标签/JSON)
  - inventory (库存量)
  - City (景点城市)
  - seasonal_weight (季节权重)
  - Image_path (图片路径)
- **关系**:
  - 1 → N 景点信息表 (attraction.product_id)
  - 1 ← N 产品订单表 (order.product_id)
  - M ←→ N 推荐记录表 (recommended_products/JSON)

## 3. 产品订单表 (order)
- **主键**: order_id
- **字段**:
  - user_id (外键 → user)
  - product_id (外键 → product)
  - Quantity (购买数量)
  - Total_price (总金额)
  - status (状态枚举)
  - Departure_city (出发城市)
  - create_time (下单时间)
- **关系**:
  - N ← 1 用户信息表 (user)
  - N ← 1 旅游产品表 (product)
  - 1 → N 消息记录表 (message.order_id)

## 4. 推荐记录表 (recommendation)
- **主键**: recommend_id
- **字段**:
  - user_id (外键 → user)
  - recommended_products (产品ID列表/JSON)
  - recommend_time (推荐时间)
- **关系**:
  - N ← 1 用户信息表 (user)
  - M → N 旅游产品表 (product, 通过JSON隐式关联)

## 5. 景点信息表 (attraction)
- **主键**: id
- **字段**:
  - product_id (外键 → product)
  - Day_number (行程天数)
  - Name (景点名称)
  - Description (详细描述)
  - recommend_duration (推荐时长)
  - images (图片路径数组/JSON)
- **关系**:
  - N ← 1 旅游产品表 (product)

## 6. 消息记录表 (message)
- **主键**: id
- **字段**:
  - user_id (外键 → user)
  - Type (消息类型)
  - Content (消息内容)
  - Order_id (外键 → order)
  - Is_read (已读标识)
  - Create_time (创建时间)
- **关系**:
  - N ← 1 用户信息表 (user)
  - N ← 1 产品订单表 (order)
```